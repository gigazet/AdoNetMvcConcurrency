# Назначение

Проект предназначен для демонстрации и отработки механизмов блокировок в веб приложении.
Раздел редактирования **сущности X** - реализует решение вопроса совместного доступа при помощи оптимистической блокировки.

При оптимистической блокировке записи предполагается, что конфликты доступа маловероятны и что запись блокируется лишь в момент ее фактического обновления.
При обновлении изменяется значение поля RowVersion - формируется новый GUID идентификатор.

Для решения конфликтов обновления записи реализован специальный режим для ручного слияния изменений.

Раздел редактирования **сущности Y** - реализует решение вопроса совместного доступа при помощи пессимистической блокировки.

При пессимистической блокировке записи она становится недоступной на редактирование для других пользователей с момента на­чала редактирования записи до момента ее сохранения. Таймаут блокировки на данный момент не реализован, но предусмотрено поле для хранения метки времени в базе данных.
 
# Реализация

Проект реализован на базе ASP.NET MVC 5, В качестве хранилища используется MS SQL Server. Доступ к операциям CRUD инкапсулирован в Репозиторий, таким образом возможно легко сменить тип хранилища. Операции CRUD реализованы в хранимых процедурах T-SQL. Блокировки конкуррентности реализованы также в хранимых процедурах.

# Установка
Проект использует LocalDb в качестве хранилища, для простоты. При необходимости строку подключения можно изменить в файле web.Config.

Проект необходимо собрать в MS Visual Studio 2015. 

База данных включена в пакет.
Для редактирования сущностей необходимо зарегистрироваться, тогда становятся доступными два редактора.

# Комментарии

Код комментирован на английском языке.

# Тесты

Для CRUD операций и для сценариев конкуррентности выполнены тесты MsTest.